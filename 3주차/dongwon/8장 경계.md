# 경계


💡 외부 코드를 내 코드에서 호출하는 부분을 경계라고 한다.



### 1. 외부코드 사용하기

인터페이스의 개발자는 인터페이스를 최대한 많은 곳에서 사용되길 원하고, 사용자는 자기가 원하는 기능에 좀 더 집중된 인터페이스를 원한다.

이러한 입장 차이로 인해 문제가 생길 수 있다.

```jsx
// Map에 저장되는 객체의 유형이 정해져 있지 않음
Map sensors = new HashMap();

// 데이터를 꺼낼 때 사용자가 형 변환을 수행
Sensor s = (Sensor)sensors.get(sensorId);

/* Generics 도입 이후 */ 

// Map에 저장되는 객체의 유형을 지정
Map<String Sensor> sensors = new HashMap<>();

Sensor s = sensors.get(sensorId);
```

하여, 시스템에 들어가는 `외부 코드`를 코드에 깔끔하게 통합해야한다.

```jsx
public class Sensors {
    private Map sensors = new HashMap();

    public Sensor getById(String id) {
        return (Sensor)sensors.get(sensorId);
    }
}
```

경계 인터페이스인 Map을 Sensor 안으로 숨겼다. 이를 통해 Map 인터페이스가 변경되더라도 나머지 프로그램에는 영향을 미치지 않는다.

Map과 같은 경계 인터페이스를 여기저기 남발하지 말아야 한다.

### 2. 경계 살피고 익히기

외부 코드를 사용하면, 개발에 소요하는 시간을 줄일 수 있다. 하지만,

무작정 사용하기 보다는 코드를 테스트하는 것이 바람직하다.

간단한 테스트 케이스를 작성해 외부 코드를 익히도록 한다. (학습테스트)

- 학습테스트는 공짜 이상이다.

  학습 테스트에 드는 비용은 없지만, 필요한 지식만 확보하기 쉽고, 이해도를 크게 높여주기 때문에 투자 대비 얻는 성과가 크다.


### 3.  아직 존재하지 않는 코드 사용하기

아는 코드와 모르는 코드를 분리할 수 있다.

피처를 개발하는데, api 인터페이스가 정해지지 않았다고 가정해보자, 무작정 api가 구현될때가기 개발을 미루면서 기다릴 수 없다. (일정은 촉박하니깐!)

api의 스펙을 모른다면, 자체적으로 인터페이스를 정의해서 사용한다.

그후 스펙이 정의된다면, 수정할 코드를 한 데 모아 수정할 수 있다.

### 4. 깨끗한 경계

소프트웨어 설계가 우수하다면 유지 보수에 많은 노력이 필요하지 않을 것이다. 외부의 코드를 사용할 때는 유지 보수 비용이 너무 커지지 않도록 주의해야 한다..

**외부 패키지에 의존하는 대신, 우리 코드에 의존하는 편이 훨씬 좋다**
